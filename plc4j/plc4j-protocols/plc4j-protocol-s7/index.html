
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia
 Rendered using Reflow Maven Skin (http://andriusvelykis.github.io/reflow-maven-skin)
-->
                <html  xml:lang="en" lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Apache PLC4X® (Incubating) - S7 Protocol Java Implementation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta http-equiv="content-language" content="en" />

    <link href="./css/bootstrap.min.css" rel="stylesheet" />
    <link href="./css/bootstrap-responsive.min.css" rel="stylesheet" />
    <link href="./css/docs.css" rel="stylesheet" />
    <link href="./css/reflow-skin.css" rel="stylesheet" />


    <link href="./css/lightbox.css" rel="stylesheet" />

    <link href="./css/site.css" rel="stylesheet" />
    <link href="./css/print.css" rel="stylesheet" media="print" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="./js/html5.js"></script>
        <![endif]-->


    
<link rel="stylesheet" href="./css/font-awesome.min.css"/>
</head>

<body class="page-index project-plc4j-protocol-s7" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
                    <a class="brand" href="../../../">Apache PLC4X (Incubating)</a>
                    <div class="nav-collapse collapse" id="top-nav-collapse">
                <ul class="nav pull-right">
                                    <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
    <ul class="dropdown-menu">
                <li ><a href="../index.html" title="PLC4J: Protocols"    >PLC4J: Protocols</a></li>
        </ul>
</li>
                                                                                    <li class="dropdown active">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reports <b class="caret"></b></a>
    <ul class="dropdown-menu">
                <li class="dropdown-submenu ">
            <a href="project-info.html" title="Project Information"    >Project Information</a>
            <ul class="dropdown-menu">
                                <li ><a href="dependencies.html" title="Dependencies"    >Dependencies</a></li>
                                <li ><a href="dependency-info.html" title="Dependency Information"    >Dependency Information</a></li>
                                <li ><a href="distribution-management.html" title="Distribution Management"    >Distribution Management</a></li>
                                <li class="active"><a href="" title="About"    >About</a></li>
                                <li ><a href="issue-tracking.html" title="Issue Management"    >Issue Management</a></li>
                                <li ><a href="license.html" title="Licenses"    >Licenses</a></li>
                                <li ><a href="mail-lists.html" title="Mailing Lists"    >Mailing Lists</a></li>
                                <li ><a href="plugin-management.html" title="Plugin Management"    >Plugin Management</a></li>
                                <li ><a href="plugins.html" title="Plugins"    >Plugins</a></li>
                                <li ><a href="source-repository.html" title="Source Code Management"    >Source Code Management</a></li>
                                <li ><a href="project-summary.html" title="Summary"    >Summary</a></li>
                        </ul>
        </li>
                <li class="dropdown-submenu ">
            <a href="project-reports.html" title="Project Reports"    >Project Reports</a>
            <ul class="dropdown-menu">
                                <li ><a href="surefire-report.html" title="Surefire Report"    >Surefire Report</a></li>
                                <li ><a href="xref/index.html" title="Source Xref"    >Source Xref</a></li>
                                <li ><a href="xref-test/index.html" title="Test Source Xref"    >Test Source Xref</a></li>
                                <li ><a href="apidocs/index.html" title="JavaDocs"    >JavaDocs</a></li>
                                <li ><a href="testapidocs/index.html" title="Test JavaDocs"    >Test JavaDocs</a></li>
                                <li ><a href="changelog.html" title="Change Log"    >Change Log</a></li>
                                <li ><a href="file-activity.html" title="File Activity"    >File Activity</a></li>
                                <li ><a href="dev-activity.html" title="Developer Activity"    >Developer Activity</a></li>
                        </ul>
        </li>
        </ul>
</li>
                                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>

<div class="container">

    <!-- Masthead
    ================================================== -->

    <header>
            <div class="jumbotron subhead">
            <div class="row" id="banner">
                <div class="span12">
                    <div class="pull-left">
                            <a href="https://plc4x.apache.org/" id="bannerLeft">        <img src="https://plc4x.apache.org/img/apache_plc4x_logo.png" alt='"'Apache PLC4X (incubating)'"' /></a>
    <p class="lead">The industrial IoT adapter</p>
                    </div>
                    <div class="pull-right">
                            <a href="http://incubator.apache.org/" id="bannerRight">        <img src="https://incubator.apache.org/images/incubator_feather_egg_logo_sm.png" alt='"'Apache Incubator'"' /></a>
                    </div>
                </div>
            </div>
        </div>
            <div>
            <ul class="breadcrumb">
                            <li class="projectVersion version-date">Version: 0.0.1-SNAPSHOT</li>
                        </ul>
        </div>
            <hr class="toc-separator" />
            <div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
            <div class="navbar-inner">
                <div id="toc-scroll-target" class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse collapse" id="toc-nav-collapse">
                        <ul id="toc" class="nav">
                            <li class="toplevel"><a href="#s7_protocol_java_implementation" title="S7 Protocol Java Implementation">S7 Protocol Java Implementation</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        </header>

    <div class="main-body">
        <div class="row">
            <div class="span12">
                <div class="body-content">
        <div class="sect1"> 
 <div class="page-header">
  <h2 id="s7_protocol_java_implementation">S7 Protocol Java Implementation</h2>
 </div> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>The current version of the S7 protocol java driver is based upon Netty 4 (<a href="http://netty.io/" class="bare">http://netty.io/</a>).</p> 
  </div> 
  <div class="paragraph"> 
   <p>As the S7 protocol running on TCP is a hierarchy of protocols, the S7 driver is implemented by providing several Protocol implementations, each encoding one layer of the protocol stack.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The complete pipeline for the S7 protocol looks like this:</p> 
  </div> 
  <div class="imageblock"> 
   <div class="content"> 
    <img src="./img/s7-netty-pipeline.png" alt="s7 netty pipeline" width="1600" height="120" /> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>Each protocol layer implementation extends the class <code>MessageToMessageCodec</code> and is configured to consume/encode messages in the current format into messages of the next lower layer.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The highest layer hereby consumes PLC4X messages, which are defined in the <code>plc4j-api</code> module, and the lowest layer produces a simple byte output.</p> 
  </div> 
  <div class="paragraph"> 
   <p>In order to implement the S7 Protocol as described in <a href="../../../protocols/s7/index.html">S7 Protocol</a> internally this is what happens inside the driver as soon as a connection is requested:</p> 
  </div> 
  <div class="imageblock"> 
   <div class="content"> 
    <img src="./img/s7-netty-setup-communication.png" alt="s7 netty setup communication" width="1600" height="1659" /> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>Above picture is a simplification. The communication of the outside with the pipeline is not implemented in a way that one component directly addresses the other. It is more that all communication is done with the <code>pipeline</code> and Netty then takes care of calling the right component at the right time.</p> 
  </div> 
  <div class="paragraph"> 
   <p>When writing to the pipeline from an application Netty starts at the <code>top</code> of the pipeline and asks each pipeline level if it is able and willing to handle the current message. If it does, the message is passed in to the <code>encode</code> method and the next component is supplied with the output of this. If the component can’t process the message the next level is checked with the unmodified message.</p> 
  </div> 
  <div class="paragraph"> 
   <p>When reading from the Socket the Netty processes the pipeline elements the same way, but in the opposite direction and a pipeline elements <code>decode</code> method is called instead of <code>encode</code>.</p> 
  </div> 
  <div class="paragraph"> 
   <p>In addition to the normal flow of messages, a Netty pipeline also provides a messaging system. Every component can fire so-called <code>user events</code> and every component can react on them by implementing a <code>userEventTriggered</code> method.</p> 
  </div> 
  <div class="paragraph"> 
   <p>This functionality is mainly used during connection setup to synchronize the sending of messages on the different layers of the protocol stack.</p> 
  </div> 
 </div> 
</div>
        </div>
    </div>
        </div>
        </div>

    </div><!-- /container -->

    <!-- Footer
    ================================================== -->
    <footer class="well">
        <div class="container">
            <div class="row">
                                    <div class="span2 bottom-nav">
<ul class="nav nav-list">
    <li class="nav-header">Reports</li>
                                                <li >
    <a href="project-info.html" title="Project Information"    >Project Information <i class="icon-chevron-down"></i></a>
    <ul class="nav nav-list">
        <li >
    <a href="dependencies.html" title="Dependencies"    >Dependencies</a>
</li>
        <li >
    <a href="dependency-info.html" title="Dependency Information"    >Dependency Information</a>
</li>
        <li >
    <a href="distribution-management.html" title="Distribution Management"    >Distribution Management</a>
</li>
        <li class="active">
    <a href="#" title="About"    >About</a>
</li>
        <li >
    <a href="issue-tracking.html" title="Issue Management"    >Issue Management</a>
</li>
        <li >
    <a href="license.html" title="Licenses"    >Licenses</a>
</li>
        <li >
    <a href="mail-lists.html" title="Mailing Lists"    >Mailing Lists</a>
</li>
        <li >
    <a href="plugin-management.html" title="Plugin Management"    >Plugin Management</a>
</li>
        <li >
    <a href="plugins.html" title="Plugins"    >Plugins</a>
</li>
        <li >
    <a href="source-repository.html" title="Source Code Management"    >Source Code Management</a>
</li>
        <li >
    <a href="project-summary.html" title="Summary"    >Summary</a>
</li>
        </ul>
</li>
                                    <li >
    <a href="project-reports.html" title="Project Reports"    >Project Reports <i class="icon-chevron-right"></i></a>
</li>
</ul>
</div>
<div class="span2 bottom-nav">
<ul class="nav nav-list">
</ul>
</div>
<div class="span2 bottom-nav">
<ul class="nav nav-list">
</ul>
</div>
<div class="span3 bottom-nav">
<ul class="nav nav-list">
</ul>
</div>
                <div class="span3 bottom-description">
                                    <blockquote><p id="bottomNote"></p></blockquote>
                                </div>
                        </div>
        </div>
    </footer>

    <div class="container subfooter">
        <div class="row">
            <div class="span12">
                <p class="pull-right"><a href="#">Back to top</a></p>
                <p class="copyright">Copyright &copy;2017-2018 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved.</p>
                            <p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
                        </div>
        </div>
    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./js/jquery.min.js"></script>

    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/lightbox.min.js"></script>
    <script src="./js/reflow-scroll.js"></script>

    <script src="./js/reflow-skin.js"></script>

</body>
</html>